(this["webpackJsonpdata-project"]=this["webpackJsonpdata-project"]||[]).push([[30],{7309:function(e,t,a){"use strict";a.r(t);var n=a(159),s=a(125),r=a.n(s),c=a(154),i=a(49),o=a(50),u=a(63),l=a(53),d=a(52),p=a(383),m=a(384),f=a(393),h=a(382),v=a(230),g=a(264),b=a(274),j=a(0),w=a.n(j),O=a(7286),k=a(152),E=a(333),y=w.a.lazy((function(){return Promise.all([a.e(0),a.e(1),a.e(2),a.e(3),a.e(24)]).then(a.t.bind(null,6431,7))}));function L(e){var t=e.permissions,a=e.selected,n=e.handleChange,s=e.username;return w.a.createElement(p.a,null,w.a.createElement(m.a,{htmlFor:"select-multiple-checkbox"}," "),w.a.createElement(f.a,{multiple:!0,value:a,onChange:n(s),input:w.a.createElement(h.a,{id:"select-multiple-checkbox"}),renderValue:function(e){return"".concat(e.length," item").concat(e.length<2?"":"s"," selected")}},t.map((function(e){return w.a.createElement(v.a,{key:e,value:e},w.a.createElement(g.a,{checked:a.indexOf(e)>-1}),w.a.createElement(b.a,{primary:e}))}))))}var C=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var s;return Object(i.a)(this,a),(s=t.call(this,e)).onPermissionChange=function(e){return function(t){for(var a,n=s.state.userList,r=0;r<n.length;r++)n[r].username===e&&(n[r].permissions=t.target.value,a=n[r]);s.setState({userList:n}),Object(E.r)(e,a.permissions,a.active).then((function(e){s.props.showMessage(e.data.message,e.data.success?"success":"error")})).catch((function(e){s.props.showMessage(e.response.data.message,"error")}))}},s.clickActiveButton=function(){var e=Object(c.a)(r.a.mark((function e(t,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{Object(E.p)(t,!a).then((function(e){Object(E.g)().then((function(e){s.setState({userList:e}),s.props.showMessage(t+"'s active is changed.","success")})).catch((function(e){s.props.showMessage(e.response.data.message,"error")}))}))}catch(n){s.props.showMessage(n.response.data.message,"error")}case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),s.clickValidatedButton=function(){var e=Object(c.a)(r.a.mark((function e(t,a){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(E.q)(t,!a).then((function(e){return Object(E.g)().then((function(e){s.setState({userList:e}),s.props.showMessage(t.username+"'s validated is changed.","success")}))})).catch((function(e){var t;return(t=s.props).showMessage.apply(t,Object(n.a)(Object(k.b)(e)))}));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),window.users=Object(u.a)(s),s.state={userList:[]},Object(E.e)().then((function(e){s.permissions=e})),Object(E.g)().then((function(e){s.setState({userList:e}),console.log(s.state.userList)})).catch((function(e){s.props.showMessage(e.response.data.message,"error")})),s}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=this.state.userList;return w.a.createElement("div",{className:"animated fadeIn"},w.a.createElement("div",{style:{maxWidth:"100%"}},w.a.createElement(j.Suspense,{fallback:w.a.createElement("div",null,"Loading...")},w.a.createElement(y,{columns:[{title:"username",field:"username"},{title:"email",field:"email"},{title:"organization",field:"organization"},{title:"Register Time",field:"createDate",type:"date",render:function(e){return new Date(e.createDate).toLocaleString()}},{title:"permissions",field:"permissions",render:function(t){return w.a.createElement(L,{username:t.username,selected:t.permissions,handleChange:e.onPermissionChange,permissions:e.permissions})}},{title:"active",field:"active",render:function(t){return w.a.createElement(O.a,{onClick:function(){return e.clickActiveButton(t.username,t.active)},color:!0===t.active?"success":"danger"},t.active?"active":"inactive")}},{title:"validated",field:"validated",render:function(t){return w.a.createElement(O.a,{onClick:function(){return e.clickValidatedButton(t,t.validated)},color:!0===t.validated?"success":"danger"},t.validated?"validated":"Invalidated")}}],data:t,title:"All Accounts"}))))}}]),a}(j.Component);t.default=C}}]);
//# sourceMappingURL=users.198e9425.chunk.js.map