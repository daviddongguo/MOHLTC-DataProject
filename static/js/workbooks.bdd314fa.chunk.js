(this["webpackJsonpdata-project"]=this["webpackJsonpdata-project"]||[]).push([[31],{397:function(e,t,a){"use strict";var r=a(1),o=a(2),n=a(0),i=(a(6),a(16)),l=a(22),c=a(72),s=n.forwardRef((function(e,t){var a=e.children,l=e.classes,s=e.className,d=e.disableTypography,m=void 0!==d&&d,u=Object(o.a)(e,["children","classes","className","disableTypography"]);return n.createElement("div",Object(r.a)({className:Object(i.a)(l.root,s),ref:t},u),m?a:n.createElement(c.a,{component:"h2",variant:"h6"},a))}));t.a=Object(l.a)({root:{margin:0,padding:"16px 24px",flex:"0 0 auto"}},{name:"MuiDialogTitle"})(s)},398:function(e,t,a){"use strict";var r=a(1),o=a(0),n=(a(6),a(22)),i=a(72),l=o.forwardRef((function(e,t){return o.createElement(i.a,Object(r.a)({component:"p",variant:"body1",color:"textSecondary",ref:t},e))}));t.a=Object(n.a)({root:{marginBottom:12}},{name:"MuiDialogContentText"})(l)},427:function(e,t,a){"use strict";var r=a(1),o=a(2),n=a(0),i=(a(6),a(16)),l=a(13),c=a(22),s=a(23),d=a(48),m=n.forwardRef((function(e,t){var a=e.classes,c=e.className,s=e.color,m=void 0===s?"primary":s,u=e.value,b=e.valueBuffer,f=e.variant,k=void 0===f?"indeterminate":f,p=Object(o.a)(e,["classes","className","color","value","valueBuffer","variant"]),h=Object(d.a)(),g={},v={bar1:{},bar2:{}};if("determinate"===k||"buffer"===k)if(void 0!==u){g["aria-valuenow"]=Math.round(u),g["aria-valuemin"]=0,g["aria-valuemax"]=100;var y=u-100;"rtl"===h.direction&&(y=-y),v.bar1.transform="translateX(".concat(y,"%)")}else 0;if("buffer"===k)if(void 0!==b){var E=(b||0)-100;"rtl"===h.direction&&(E=-E),v.bar2.transform="translateX(".concat(E,"%)")}else 0;return n.createElement("div",Object(r.a)({className:Object(i.a)(a.root,a["color".concat(Object(l.a)(m))],c,{determinate:a.determinate,indeterminate:a.indeterminate,buffer:a.buffer,query:a.query}[k]),role:"progressbar"},g,{ref:t},p),"buffer"===k?n.createElement("div",{className:Object(i.a)(a.dashed,a["dashedColor".concat(Object(l.a)(m))])}):null,n.createElement("div",{className:Object(i.a)(a.bar,a["barColor".concat(Object(l.a)(m))],("indeterminate"===k||"query"===k)&&a.bar1Indeterminate,{determinate:a.bar1Determinate,buffer:a.bar1Buffer}[k]),style:v.bar1}),"determinate"===k?null:n.createElement("div",{className:Object(i.a)(a.bar,("indeterminate"===k||"query"===k)&&a.bar2Indeterminate,"buffer"===k?[a["color".concat(Object(l.a)(m))],a.bar2Buffer]:a["barColor".concat(Object(l.a)(m))]),style:v.bar2}))}));t.a=Object(c.a)((function(e){var t=function(t){return"light"===e.palette.type?Object(s.i)(t,.62):Object(s.a)(t,.5)},a=t(e.palette.primary.main),r=t(e.palette.secondary.main);return{root:{position:"relative",overflow:"hidden",height:4,"@media print":{colorAdjust:"exact"}},colorPrimary:{backgroundColor:a},colorSecondary:{backgroundColor:r},determinate:{},indeterminate:{},buffer:{backgroundColor:"transparent"},query:{transform:"rotate(180deg)"},dashed:{position:"absolute",marginTop:0,height:"100%",width:"100%",animation:"$buffer 3s infinite linear"},dashedColorPrimary:{backgroundImage:"radial-gradient(".concat(a," 0%, ").concat(a," 16%, transparent 42%)"),backgroundSize:"10px 10px",backgroundPosition:"0 -23px"},dashedColorSecondary:{backgroundImage:"radial-gradient(".concat(r," 0%, ").concat(r," 16%, transparent 42%)"),backgroundSize:"10px 10px",backgroundPosition:"0 -23px"},bar:{width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},barColorPrimary:{backgroundColor:e.palette.primary.main},barColorSecondary:{backgroundColor:e.palette.secondary.main},bar1Indeterminate:{width:"auto",animation:"$indeterminate1 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite"},bar1Determinate:{transition:"transform .".concat(4,"s linear")},bar1Buffer:{zIndex:1,transition:"transform .".concat(4,"s linear")},bar2Indeterminate:{width:"auto",animation:"$indeterminate2 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite"},bar2Buffer:{transition:"transform .".concat(4,"s linear")},"@keyframes indeterminate1":{"0%":{left:"-35%",right:"100%"},"60%":{left:"100%",right:"-90%"},"100%":{left:"100%",right:"-90%"}},"@keyframes indeterminate2":{"0%":{left:"-200%",right:"100%"},"60%":{left:"107%",right:"-8%"},"100%":{left:"107%",right:"-8%"}},"@keyframes buffer":{"0%":{opacity:1,backgroundPosition:"0 -23px"},"50%":{opacity:0,backgroundPosition:"0 -23px"},"100%":{opacity:1,backgroundPosition:"-200px -23px"}}}}),{name:"MuiLinearProgress"})(m)},466:function(e,t,a){"use strict";var r=a(1),o=a(2),n=a(0),i=(a(6),a(16)),l=a(22),c=a(23),s=n.forwardRef((function(e,t){var a=e.absolute,l=void 0!==a&&a,c=e.classes,s=e.className,d=e.component,m=void 0===d?"hr":d,u=e.flexItem,b=void 0!==u&&u,f=e.light,k=void 0!==f&&f,p=e.orientation,h=void 0===p?"horizontal":p,g=e.role,v=void 0===g?"hr"!==m?"separator":void 0:g,y=e.variant,E=void 0===y?"fullWidth":y,j=Object(o.a)(e,["absolute","classes","className","component","flexItem","light","orientation","role","variant"]);return n.createElement(m,Object(r.a)({className:Object(i.a)(c.root,s,"fullWidth"!==E&&c[E],l&&c.absolute,b&&c.flexItem,k&&c.light,"vertical"===h&&c.vertical),role:v,ref:t},j))}));t.a=Object(l.a)((function(e){return{root:{height:1,margin:0,border:"none",flexShrink:0,backgroundColor:e.palette.divider},absolute:{position:"absolute",bottom:0,left:0,width:"100%"},inset:{marginLeft:72},light:{backgroundColor:Object(c.d)(e.palette.divider,.08)},middle:{marginLeft:e.spacing(2),marginRight:e.spacing(2)},vertical:{height:"100%",width:1},flexItem:{alignSelf:"stretch",height:"auto"}}}),{name:"MuiDivider"})(s)},6349:function(e,t,a){"use strict";a.d(t,"b",(function(){return b}));var r=a(125),o=a.n(r),n=a(49),i=a(50),l=a(154),c=a(168),s=a.n(c),d=a(167),m=a(152),u=null;function b(){return f.apply(this,arguments)}function f(){return(f=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.get(d.a.server+"/api/v2/admin/workbooks",m.a);case 2:if(t=e.sent,!Object(m.c)(t)){e.next=5;break}return e.abrupt("return",t.data.workbooks);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var k=function(){function e(t){return Object(n.a)(this,e),u||(u=this,this.props=t),u}return Object(i.a)(e,[{key:"getAllWorkbooksForUser",value:function(){var e=this,t=[];return t.push(s.a.get(d.a.server+"/api/filled-workbooks",m.a),s.a.get(d.a.server+"/api/workbooks",m.a)),Promise.all(t).then((function(t){if(Object(m.c)(t[0])&&e.check(t[1]))return[t[0].data.filledWorkbooks,t[1].data.workbooks]}))}},{key:"getAllWorkbooksForAdmin",value:function(){return s.a.get(d.a.server+"/api/v2/admin/workbooks",m.a).then((function(e){if(Object(m.c)(e))return e.data.workbooks}))}},{key:"deleteWorkbook",value:function(e,t){return t?this.deleteWorkbookForAdmin(e):this.deleteWorkbookForUser(e)}},{key:"deleteWorkbookForAdmin",value:function(e){var t=this;return s.a.delete(d.a.server+"/api/v2/admin/workbooks/"+e,m.a).then((function(e){if(Object(m.c)(e))return e.data})).catch((function(e){t.props.showMessage(e.toString(),"error")}))}},{key:"deleteWorkbookForUser",value:function(e){var t=this;return s.a.delete(d.a.server+"/api/filled-workbook",{data:{name:e},withCredentials:m.a.withCredentials}).then((function(e){if(Object(m.c)(e))return e.data})).catch((function(e){t.props.showMessage(e.toString(),"error")}))}}]),e}();t.a=k},6736:function(e,t,a){},7322:function(e,t,a){"use strict";a.r(t);var r=a(49),o=a(50),n=a(53),i=a(52),l=a(195),c=a(0),s=a.n(c),d=a(7283),m=a(542),u=a(427),b=a(351),f=a(72),k=a(466),p=(a(6736),a(381)),h=a(275),g=a(544),v=a(460),y=a(545),E=a(248),j=a(396),w=a(56),O=function(e){Object(n.a)(a,e);var t=Object(i.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.fileName,r=e.editHref,o=e.deleteCb;return s.a.createElement(p.a,{className:t.card},s.a.createElement(h.a,{title:a,placement:"bottom",enterDelay:300},s.a.createElement(w.b,{to:r},s.a.createElement(g.a,null,s.a.createElement(v.a,{className:t.cardContent},s.a.createElement(m.a,{container:!0,alignItems:"center",justify:"center",spacing:2},s.a.createElement(m.a,{item:!0,xs:12,style:{textAlign:"center"}},s.a.createElement(j.b,{className:t.icon})),s.a.createElement(m.a,{item:!0,xs:12},s.a.createElement(f.a,{variant:"subtitle1",noWrap:!0,style:{color:"rgba(0,0,0,0.87)"}},a))))))),s.a.createElement(y.a,{className:t.cardActions},s.a.createElement(w.b,{to:r},s.a.createElement(E.a,{size:"small",color:"primary"},"Edit")),o?s.a.createElement(E.a,{size:"small",color:"primary",onClick:function(){o(a)}},"Delete"):""))}}]),a}(c.Component),x=Object(d.a)((function(e){return{card:{width:180,height:180},cardContent:{height:145,padding:"16px 16px 0 16px"},cardActions:{padding:"0 4px"},icon:{color:"#22a463",height:80,width:80}}}))(O),C=a(6349),W=a(6737),A=a(6740),N=a(6739),D=a(398),S=a(397),I=function(e){Object(n.a)(a,e);var t=Object(i.a)(a);function a(e){var o;return Object(r.a)(this,a),(o=t.call(this,e)).handleAlertDialogCancel=function(){o.setState({openAlertDialog:!1})},o.handleAlertDialogDelete=function(){o.setState({openAlertDialog:!1});var e=o.state.currentWorkbook;e&&o.workbookManager.deleteWorkbook(e,"admin"===o.mode).then((function(e){e?(console.log("debugging: "+e.message),o.componentDidMount(),o.props.showMessage(e.message,"success")):o.props.showMessage("Something Error","error")}))},o.deleteWorkbookForUser=function(e){o.setState({currentWorkbook:e,openAlertDialog:!0})},o.deleteWorkbookForAdmin=function(e){o.setState({currentWorkbook:e,openAlertDialog:!0})},o.mode=o.props.params.mode,o.state={loading:!0,currentWorkbook:null,openAlertDialog:!1},o.workbookManager=new C.a(o.props),o}return Object(o.a)(a,[{key:"filledWorkbooks",value:function(){for(var e=[],t=this.workbooks[0],a=0;a<t.length;a++){var r=t[a].name;e.push(s.a.createElement(m.a,{key:a,item:!0},s.a.createElement(x,{fileName:r,deleteCb:this.deleteWorkbookForUser,editHref:"/workbooks/fill/"+r})))}return e}},{key:"unFilledWorkbooks",value:function(){for(var e=[],t=this.workbooks[1],a=0;a<t.length;a++){var r=t[a].name;e.push(s.a.createElement(m.a,{key:a,item:!0},s.a.createElement(x,{fileName:r,editHref:"/workbooks/fill/"+r})))}return e}},{key:"allWorkbooks",value:function(){for(var e=[],t=this.workbooks,a=0;a<t.length;a++){var r=t[a].name;e.push(s.a.createElement(m.a,{key:a,item:!0},s.a.createElement(x,{fileName:r,deleteCb:this.deleteWorkbookForAdmin,editHref:"/workbooks/template/"+r})))}return e}},{key:"componentDidMount",value:function(){var e=this;"user"===this.mode?this.workbookManager.getAllWorkbooksForUser().then((function(t){t&&(e.workbooks=t,e.setState({loading:!1}))})):"admin"===this.mode&&this.workbookManager.getAllWorkbooksForAdmin().then((function(t){t&&(e.workbooks=t,e.setState({loading:!1}))}))}},{key:"dialog",value:function(){return s.a.createElement(W.a,{open:this.state.openAlertDialog,keepMounted:!0,onClose:this.handleClose,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},s.a.createElement(S.a,{id:"alert-dialog-slide-title"},"Confirm delete ?"),s.a.createElement(N.a,null,s.a.createElement(D.a,{id:"alert-dialog-slide-description"},"Are you sure you want to delete ",s.a.createElement("strong",null,this.state.currentWorkbook),"? ",s.a.createElement("br",null),"This process cannot be undone.")),s.a.createElement(A.a,null,s.a.createElement(E.a,{onClick:this.handleAlertDialogCancel,color:"primary"},"Cancel"),s.a.createElement(E.a,{onClick:this.handleAlertDialogDelete,color:"primary"},"Delete")))}},{key:"render",value:function(){var e=this.props.classes;return this.state.loading?s.a.createElement("div",{className:"animated fadeIn"},s.a.createElement("h3",null,"Loading..."),s.a.createElement("br",null),s.a.createElement(u.a,{variant:"indeterminate"})):"user"===this.mode?s.a.createElement("div",{className:"animated fadeIn"},s.a.createElement(b.a,{className:e.root,elevation:1},s.a.createElement(m.a,{container:!0,spacing:2},s.a.createElement(m.a,{item:!0,xs:12},s.a.createElement(f.a,{variant:"h6",gutterBottom:!0},"Empty Workbooks")),this.unFilledWorkbooks()),s.a.createElement("br",null),s.a.createElement(k.a,null),s.a.createElement("br",null),s.a.createElement(m.a,{container:!0,spacing:2},s.a.createElement(m.a,{item:!0,xs:12},s.a.createElement(f.a,{variant:"h6",gutterBottom:!0},"Filled Workbooks")),this.filledWorkbooks()),this.dialog())):"admin"===this.mode?s.a.createElement("div",{className:"animated fadeIn"},s.a.createElement(b.a,{className:e.root,elevation:1},s.a.createElement(m.a,{container:!0,spacing:2},s.a.createElement(m.a,{item:!0,xs:12},s.a.createElement(f.a,{variant:"h6",gutterBottom:!0},"All Workbooks")),this.allWorkbooks())),this.dialog()):s.a.createElement(f.a,{variant:"h6",gutterBottom:!0},"Error: Illegal params.")}}]),a}(c.Component);t.default=Object(d.a)((function(e){return{root:Object(l.a)(Object(l.a)({},e.mixins.gutters()),{},{paddingTop:e.spacing(2),paddingBottom:e.spacing(2)})}}))(I)}}]);
//# sourceMappingURL=workbooks.bdd314fa.chunk.js.map